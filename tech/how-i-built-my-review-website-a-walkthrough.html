<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>How I Built my Review Website: A Walkthrough &gt; Tech &gt; Lee Penney</title><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="description" content="Leading up to last weekend something reminded me I had a batch of book reviews that had previously been housed on my personal blog, but got lost in"><meta property="og:title" content="How I Built my Review Website: A Walkthrough"><meta property="og:description" content="Leading up to last weekend something reminded me I had a batch of book reviews that had previously been housed on my personal blog, but got lost in"><meta property="og:url" content="https://www.leepenney.com/tech/how-i-built-my-review-website-a-walkthrough.html"><meta property="og:type" content="article"><link rel="canonical" href="https://www.leepenney.com/tech/how-i-built-my-review-website-a-walkthrough.html"><link rel="icon" href="https://www.leepenney.com/img/favicon.ico" type="image/x-icon"><style>body{color:#212121;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:.02em;padding:0 20px;margin:0 auto;max-width:800px}a{color:#212121;text-decoration:none}dt{font-weight:700;font-size:1.2em}dt a{display:block;padding:10px 0 5px 0}dd,div.meta{margin:0 0 1em 0;color:#aaa;font-size:90%}code{font-family:monospace;font-size:120%}header{border-bottom:1px solid;padding:20px 0}header:after{content:"";display:table;clear:both}header svg{float:left;margin:0 10px 0 0}header nav,header span{vertical-align:middle}header nav{line-height:55px}header nav a{border-bottom:1px dotted}main{margin:20px 0}main.home section{display:grid;grid-template-columns:1fr 1fr;grid-auto-rows:calc((100vw - 40px)/ 2);column-gap:10px;row-gap:10px;margin:0 0 3em 0;grid-template-rows:2em}.cat-block{display:block;color:#fff;background:#212121;text-decoration:none;text-align:center;line-height:calc((100vw - 40px)/ 2)}.cat-block:nth-child(1){grid-column-start:1;grid-column-end:3;line-height:normal;color:#212121;background:#fff}span.tag{background:#eaedee;display:inline-block;margin:0 7px 0 0;border-radius:5px;padding:0 10px}main.books dl{padding:0 0 0 90px}main.books dd:after{content:"";display:table;clear:both}main.books dl img{height:120px;width:80px;float:left;margin:-1.6em 0 0 -90px}article img{max-width:100%;height:auto}article hr{display:none}article table{border-collapse:collapse;border:none!important;margin:1em auto}article tr{border-bottom:1px dotted}article td,article th{border:none!important;padding:.5em 1em}article li{margin:0 0 1em 0}article a{border-bottom:1px dotted}main.book article img{height:180px;width:120px;display:block;margin:0 1em 0 0;float:left}main.book article p:first-of-type+ul{list-style-type:none;float:left;padding:0;width:120px;margin:1em 1em 1em 0;font-size:90%;clear:left;text-transform:uppercase;text-align:center}main.book article ul a{display:block;background:#000;color:#fff;line-height:40px;padding:5px;font-size:80%;font-weight:700;margin:0 0 2px 0}form{max-width:400px;margin:0 auto}label{display:block;margin:0;padding:0}input{display:block;font-size:1em;margin-bottom:1em;width:100%;padding:5px;box-sizing:border-box}input[type=submit]{background:#000;color:#fff;border:0;height:40px}main.book section{border-top:1px solid}footer{border-top:1px solid}@media screen and (min-width:800px){header span{line-height:55px}main.home section{grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-template-rows:unset}.cat-block:nth-child(1){grid-column-start:1;grid-column-end:2;font-weight:700;line-height:195px}.cat-block:nth-child(3n+2){grid-column-start:2}.cat-block{line-height:195px}main.books dl{padding:0;display:grid;grid-template-columns:1fr 1fr;grid-auto-flow:dense}main.books dt{padding:0 0 0 calc(73px + 1em)}main.books dl>:nth-of-type(odd){grid-column:1}main.books dl>:nth-of-type(even){grid-column:2}main.books dl img{margin:-1em 1em 0 0}}</style></head><body><header><a href="/"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="55" height="55" viewBox="0 0 400 400"><path d="M0 200v200h400V0H0v200zm60-68v60l56.3-.2 56.2-.3.5-40c.6-45.8.6-45.5 9.5-57.9 7.7-10.7 19.8-18.1 34.2-20.7 3.2-.6 26.4-.9 57.5-.6 46.5.3 53 .5 58.2 2.1 22.7 6.8 38.1 21.9 46.3 45.6 2.4 7 2.7 9 3.1 29.1.3 19.5.2 22.5-1.7 29.9-5.2 20.7-17 34.9-36.6 44-12.2 5.8-19.5 7-40.7 7-10.1 0-34.8.3-55 .7l-36.8.6V344h-39.3l.6-57 .7-57h-67.5c-58.7 0-68-.2-71.3-1.5-4.9-2.1-8.1-5.2-10.3-10-1.7-3.8-1.9-8.1-1.9-75.3V72h38v60z"/><path d="M219 111.3c-1.9.7-4.4 2.7-5.7 4.6-2.3 3.4-2.3 3.5-2.3 39.8v36.4l54.8-.3 54.7-.3 5.6-2.6c6.5-3.1 11.9-8.2 15.1-14.2 2.1-3.9 2.3-5.4 2.3-22.2 0-17.7-.1-18.1-2.8-24.1-3.4-7.4-8.4-12.5-15.2-15.6-5-2.3-5.2-2.3-54-2.5-36.3-.2-49.9.1-52.5 1z"/></svg></a><nav><a href="https://www.leepenney.com/index.html">Home</a> &gt; <a href="https://www.leepenney.com/tech">Tech</a></nav></header><main class="features tech vfd"><article><h1>How I Built my Review Website: A Walkthrough</h1><div class="meta">20 May, 2011 | <span class="tag">Features</span><span class="tag">Tech</span><span class="tag">Vfd</span></div><p>Leading up to last weekend something reminded me I had a batch of book reviews that had previously been housed on <a href="http://thedigeratipeninsula.org.uk/">my personal blog</a>, but got lost in the move to hosting on WordPress.com (which I did to try and get back into the Google index as they dropped me for some reason, the reviews were lost, incidentally, because I created a <a href="http://www.viewfinderdesign.co.uk/archive/241/book-review-custom-post-type/">custom post type</a> and then exported from a theme which didn't have it, just FYI). I also had a hankering to have a play with WordPress' custom post types and taxonomies. I'd already had a stab at it for book reviews, so most of the work seemed done and I figured it would be easy to throw something up. Which it would, only as it progressed I got a little more ambitious.</p><p>Anyway, it's done now and you can find the site at <a href="http://consumeandreview.co.uk/">consumeandreview.co.uk</a></p><p><a href="http://www.viewfinderdesign.co.uk/wp-content/uploads/2011/05/consume-and-review-screenshot.png"><img src="https://www.leepenney.com/img/89/consume-and-review-screenshot-252x300.png" alt="" title="consume and review screenshot" width="252" height="300" class="aligncenter size-medium wp-image-286"></a></p><p>I started by <a href="http://wordpress.org/">grabbing the latest version of WordPress</a> and setting it up on my local development server. Once that was done I re-used much of my code from the <a href="http://www.viewfinderdesign.co.uk/archive/241/book-review-custom-post-type/">book review custom post type</a> I had created, but decided to convert it to a plugin instead (for future portability). I also added taxonomies for author and genre using the <a href="http://codex.wordpress.org/Function_Reference/register_taxonomy">register taxonomy function</a>. Previously I had stored author as custom meta data, but as it was something that could be shared by multiple books I figured it was better as a taxonomy and would save me re-typing (plus it allowed some functionality, such as author pages, much more easily). I also decided to change from the simple recommended yes/no system and go with a rating out of five, so that required a small change as well.</p><p>Once that was done I exported all my reviews from my old site and imported them using the <a href="http://wordpress.org/extend/plugins/wordpress-importer/">WordPress Importer plugin</a>.</p><hr id="read-more">I started converting the authors in the meta data to terms in the taxonomy manually at first, figuring I would leave most where they were, but then decided to move them all, so grabbed a copy of the <a href="http://wordpress.org/extend/plugins/custom-field-taxonomies/">Custom Field Taxonomies plugin</a>. In order to get my custom post type (book_review) to be picked up so it would find author as metadata to be converted I had to modify line 124 of the admin.php file to:<p></p><p>[php firstline="124"]foreach ( get_object_taxonomies( array('post','book_review'), 'objects' ) as $tax_name =&gt; $tax_obj )[/php]</p><p>Once that was done I went looking for a theme. I had intended to use someone else's design to save time, but I couldn't find any I was happy with, so I designed my own. While working on this I knew I wanted it to be image light but to make use of some bold fonts and sizes. I'm used to working with the limited pallet of web-safe fonts you can use (those installed on all/most computers regardless of type), but they didn't seem to cut it for this project, so I researched techniques for using any font you wished on a web page that would work for all visitors.</p><p>I already knew of popular ones like <a href="http://en.wikipedia.org/wiki/Scalable_Inman_Flash_Replacement">sIFR</a> and <a href="https://github.com/sorccu/cufon/wiki/about">cufon</a>, but I was happy to see that support for the CSS3 @font-face designation was now supported by the latest version of all the main browsers, so I set about learning how to embed fonts for the browsers (slightly different in IE versus everyone else, which is par for the course) and finding some suitable fonts. Google is your friend on this and I was amazed how many great free fonts are out there to improve the look of your site, I can recommend having a look on <a href="http://www.fontsquirrel.com/">Font Squirrel</a>, both for fonts and how to use. (update: you can also check out <a href="http://www.google.com/webfonts">Google web fonts</a>, which I only found after I built it.)</p><p>A couple of the fonts I liked didn't have bold versions or italics, so I had to try quite a few (it ate a lot of time, but was well worth it). I plumped for <a href="http://www.theleagueofmoveabletype.com/fonts/4-chunk">ChunkFive</a> (site header), <a href="http://aldusleaf.org/crimson/">Crimson</a> (page text) and <a href="http://www.exljbris.com/fontin.html">Fontin</a> (headers) in the end.</p><p>It took a while to get the layout right on all the page templates. It's not entirely there yet (I think the archives for genre should be on one page -- I hate having to click through lots of pages) but I have been tweaking since the weekend and there have been small improvements (to both layout and navigation).</p><p>Something I knew I wanted was a review archive listing the books by author which isn't something WordPress does out of the box and my previous custom code was written to support details in meta data. In the end I wrote a fairly simple database query to pull out all the details I wanted:</p><p>[php]function vf_get_reviews_by_author() {<br>global $wpdb;</p><p>$sql = &quot;select ter.term_id, ter.name, tertax.taxonomy, posts.ID, posts.post_title, posts.post_content<br>from $wpdb-&gt;terms AS ter<br>left join $wpdb-&gt;term_taxonomy tertax<br>on tertax.term_id = ter.term_id<br>left join $wpdb-&gt;term_relationships terrel<br>on terrel.term_taxonomy_id = tertax.term_taxonomy_id<br>left join $wpdb-&gt;posts posts<br>on posts.ID = terrel.object_id<br>where tertax.taxonomy = 'author'<br>and posts.post_status = 'publish'<br>order by ter.name,posts.post_title&quot;;</p><p>$books_by_author = $wpdb-&gt;get_results($sql, ARRAY_A);</p><p>return $books_by_author;<br>}[/php]</p><p>I then just loop through the results and create a new header when the author name changes. I may try to make this sortable in some way in the future. As the list was fairly long (and only likely to get longer) while leaving a lot of white space to the right, I decided to put them into columns.</p><p>To get the columns on the review archive I wrote a second query to get an author count and just keep track of the number of iterations through the loop, then insert the closing tag of the left column and open the right one when the number of loops matches half the total number of authors.</p><p>At this point I decided to add in a series taxonomy so, where books were part of a series, you could find related books easily. This was to allow people to find similar books to read and to allow them to see what else is in the same story arc/feature the same character(s). Presenting this data necessitated a slight change to the layout. I also decided the series archive should show all of the books in the series on one page, rather then five at a time (which is what I had set the default to). Easy enough to do with a custom taxonomy template and a modification of the posts_per_page in the query. I also ended up modifying the review archive to add in the series details.</p><p>After updating some books with authors, genre and series it became hard to see which ones I had updated and which ones I hadn't in the admin section, so I added functions to call the manage_[post -type]_posts_custom_column and manage_edit-[post -type]_columns (using book_review for the post type) filters to display some additional columns for book reviews.</p><p>I added an about page and a contact form, should anyone want to get in touch (I disabled comments and trackbacks, I didn't think they were necessary) and I could have used one of my own contact forms, but decided to use the <a href="http://wordpress.org/extend/plugins/contact-form-7/">Contact Form 7 plugin</a> instead.</p><p>Once I was happy I registered the domain (I had a few ideas for names) and set up hosting, then loaded the themes, plugins and content. A bit of testing and tweaking (and changes, some of which are listed above) and it was ready to go. I was pleased to see that the main browsers now render in such a similar way I didn't need any tweaks to get it working in IE (as is usual) and the use of embedded fonts means the site looks practically identical on all platforms, which is a nice bonus.</p><p>Once it was live I added a sitemap plugin (<a href="http://wordpress.org/extend/plugins/google-sitemap-generator/">Google XML Sitemaps</a>) to help SEO, but I had to add the <a href="http://www.getupandrunning.net/2010/06/adding-custom-content-types-to-the-sitemap/">Guar Sitemap sub-plugin</a> to get custom post types included. I also setup the <a href="http://wordpress.org/extend/plugins/yourls-wordpress-to-twitter/">YOURLS plugin</a>, which I use on a few of my sites to to automatically post to <a href="http://twitter.com/longplay78">my Twitter account</a> with a shortened link. Version 1.4.9 didn't work with the version of YOURLS I use (1.4), so I had to roll back to <a href="http://www.viewfinderdesign.co.uk/download/yourls-1.4.8.zip">1.4.8</a>, which did.</p><p>So far I'm pleased with the result, no doubt that'll change, but the process gave me a chance to try some new things. I'd like to add in some functionality to offer readers links to similar books, but I'm not sure of the best way yet (I haven't found a service that offers an easy way to get recommendations for similar items, <a href="http://www.librarything.com">LibraryThing</a> looks to have promise, but you end up with a lot of fairly vague links, the page for <em><a href="http://www.librarything.com/work/9993/recommendations/">Abhorsen</a></em>, for example, lists <em>Harry Potter</em> and <em>Eragon</em> as similar, which I wouldn't class them as). I'm happy for now, though, and it'll give me a chance to get some reviews on some recently finished books up.</p><p>(If you're interested in reading another post about site building, <a href="http://thedigeratipeninsula.org.uk/2005/06/28/list-books/">why not check out this post I wrote regarding List Books</a>.)</p></article></main><footer><p>&copy; Lee Penney. All rights reserved.</p></footer></body></html>