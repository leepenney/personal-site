<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Excluding a Category from the Home Page &gt; Tech &gt; Lee Penney</title><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="description" content="This is the code to add/change in the index.php file of your template if you use the method specified in the WordPress"><meta property="og:title" content="Excluding a Category from the Home Page"><meta property="og:description" content="This is the code to add/change in the index.php file of your template if you use the method specified in the WordPress"><meta property="og:url" content="https://www.leepenney.com/tech/excluding-a-category-from-the-home-page.html"><meta property="og:type" content="article"><link rel="canonical" href="https://www.leepenney.com/tech/excluding-a-category-from-the-home-page.html"><link rel="icon" href="https://www.leepenney.com/img/favicon.ico" type="image/x-icon"><style>body{color:#212121;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:.02em;padding:0 20px;margin:0 auto;max-width:800px}a{color:#212121;text-decoration:none}dt{font-weight:700;font-size:1.2em}dt a{display:block;padding:10px 0 5px 0}dd,div.meta{margin:0 0 1em 0;color:#aaa;font-size:90%}code{font-family:monospace;font-size:120%}header{border-bottom:1px solid;padding:20px 0}header:after{content:"";display:table;clear:both}header svg{float:left;margin:0 10px 0 0}header nav,header span{vertical-align:middle}header nav{line-height:55px}header nav a{border-bottom:1px dotted}main{margin:20px 0}main.home section{display:grid;grid-template-columns:1fr 1fr;grid-auto-rows:calc((100vw - 40px)/ 2);column-gap:10px;row-gap:10px;margin:0 0 3em 0;grid-template-rows:2em}.cat-block{display:block;color:#fff;background:#212121;text-decoration:none;text-align:center;line-height:calc((100vw - 40px)/ 2)}.cat-block:nth-child(1){grid-column-start:1;grid-column-end:3;line-height:normal;color:#212121;background:#fff}span.tag{background:#eaedee;display:inline-block;margin:0 7px 0 0;border-radius:5px;padding:0 10px}main.books dl{padding:0 0 0 90px}main.books dd:after{content:"";display:table;clear:both}main.books dl img{height:120px;width:80px;float:left;margin:-1.6em 0 0 -90px}article img{max-width:100%;height:auto}article hr{display:none}article table{border-collapse:collapse;border:none!important;margin:1em auto}article tr{border-bottom:1px dotted}article td,article th{border:none!important;padding:.5em 1em}article li{margin:0 0 1em 0}article a{border-bottom:1px dotted}main.book article img{height:180px;width:120px;display:block;margin:0 1em 0 0;float:left}main.book article p:first-of-type+ul{list-style-type:none;float:left;padding:0;width:120px;margin:1em 1em 1em 0;font-size:90%;clear:left;text-transform:uppercase;text-align:center}main.book article ul a{display:block;background:#000;color:#fff;line-height:40px;padding:5px;font-size:80%;font-weight:700;margin:0 0 2px 0}form{max-width:400px;margin:0 auto}label{display:block;margin:0;padding:0}input{display:block;font-size:1em;margin-bottom:1em;width:100%;padding:5px;box-sizing:border-box}input[type=submit]{background:#000;color:#fff;border:0;height:40px}main.book section{border-top:1px solid}footer{border-top:1px solid}@media screen and (min-width:800px){header span{line-height:55px}main.home section{grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-template-rows:unset}.cat-block:nth-child(1){grid-column-start:1;grid-column-end:2;font-weight:700;line-height:195px}.cat-block:nth-child(3n+2){grid-column-start:2}.cat-block{line-height:195px}main.books dl{padding:0;display:grid;grid-template-columns:1fr 1fr;grid-auto-flow:dense}main.books dt{padding:0 0 0 calc(73px + 1em)}main.books dl>:nth-of-type(odd){grid-column:1}main.books dl>:nth-of-type(even){grid-column:2}main.books dl img{margin:-1em 1em 0 0}}</style></head><body><header><a href="/"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="55" height="55" viewBox="0 0 400 400"><path d="M0 200v200h400V0H0v200zm60-68v60l56.3-.2 56.2-.3.5-40c.6-45.8.6-45.5 9.5-57.9 7.7-10.7 19.8-18.1 34.2-20.7 3.2-.6 26.4-.9 57.5-.6 46.5.3 53 .5 58.2 2.1 22.7 6.8 38.1 21.9 46.3 45.6 2.4 7 2.7 9 3.1 29.1.3 19.5.2 22.5-1.7 29.9-5.2 20.7-17 34.9-36.6 44-12.2 5.8-19.5 7-40.7 7-10.1 0-34.8.3-55 .7l-36.8.6V344h-39.3l.6-57 .7-57h-67.5c-58.7 0-68-.2-71.3-1.5-4.9-2.1-8.1-5.2-10.3-10-1.7-3.8-1.9-8.1-1.9-75.3V72h38v60z"/><path d="M219 111.3c-1.9.7-4.4 2.7-5.7 4.6-2.3 3.4-2.3 3.5-2.3 39.8v36.4l54.8-.3 54.7-.3 5.6-2.6c6.5-3.1 11.9-8.2 15.1-14.2 2.1-3.9 2.3-5.4 2.3-22.2 0-17.7-.1-18.1-2.8-24.1-3.4-7.4-8.4-12.5-15.2-15.6-5-2.3-5.2-2.3-54-2.5-36.3-.2-49.9.1-52.5 1z"/></svg></a><nav><a href="https://www.leepenney.com/index.html">Home</a> &gt; <a href="https://www.leepenney.com/tech">Tech</a></nav></header><main class="Tips WordPress Tips tech vfd"><article><h1>Excluding a Category from the Home Page</h1><div class="meta">23 Aug, 2005 | <span class="tag">Tips</span><span class="tag">Wordpress Tips</span><span class="tag">Tech</span><span class="tag">Vfd</span></div><p>This is the code to add/change in the index.php file of your template if you use <a href="http://codex.wordpress.org/The_Loop#Exclude_Posts_From_Some_Category">the method specified in the WordPress codex</a>:</p><p>&lt;?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?&gt;<br>&lt;! -- The following tests if the current post is in category 3. --&gt;<br>&lt;! -- If it is not, the code within The Loop is executed as normal. --&gt;<br>&lt;! -- If it is, nothing is done until the next post is processed. --&gt;<br>&lt;?php if ( !(in_category('3')) ) { ?&gt;</p><p>Unfortunately, this doesn't stop the loop from executing, all it does is stop the post from the specified category from showing up. You may be thinking this is exactly what you want, but, generally, it isn't. You see, say we set the number of posts to appear on the home page to 10, what happens is, WordPress works through your posts and if any of the last 10 posts is in the category that you don't want to appear they get included in the count even if they don't show up. So if seven of the last 10 posts were in the category you want to exclude, you'll only get three posts on your home page. Not good. There is a simpler method to exclude a category and it doesn't cause the same counting problems.</p><p>Start by going into your <strong>admin section</strong>, then <strong>Manage</strong>, then <strong>Categories</strong> and make a note of the <strong>ID number</strong> of the category you wish to exclude. Now open up the <strong>index.php</strong> file of the theme you use (you can do this through Presentation, then Theme Editor if you have set the file properties to allow it, otherwise use a text editor).</p><p>Now find the line that says:</p><p>&lt;?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?&gt;</p><p><strong>Note:</strong> it may be split over two lines.</p><p>Now add:</p><p>query_posts($query_string .'&amp;cat=-catID');</p><p>between the ':' and the word 'while', where catID is the ID number of the category you want to exclude, so the line looks something like this:</p><p>&lt;?php if ( have_posts() ) : query_posts($query_string .'&amp;cat=-catID'); while ( have_posts() ) : the_post(); ?&gt;</p><p>Make sure you put a - (minus) sign <strong>in front</strong> of the category ID number.</p><p>Save and upload if necessary and check it out. You should now be excluding the correct category and getting the right number of posts.</p></article></main><footer><p>&copy; Lee Penney. All rights reserved.</p></footer></body></html>