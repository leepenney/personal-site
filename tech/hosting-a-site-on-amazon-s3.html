<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Hosting a Site on Amazon S3 &gt; Tech &gt; Lee Penney</title><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="description" content="This is part of my series of try some alternative hosting options. I left Amazon until last at they&#39;re th"><meta property="og:title" content="Hosting a Site on Amazon S3"><meta property="og:description" content="This is part of my series of try some alternative hosting options. I left Amazon until last at they&#39;re th"><meta property="og:url" content="https://www.leepenney.com/tech/hosting-a-site-on-amazon-s3.html"><meta property="og:type" content="article"><link rel="canonical" href="https://www.leepenney.com/tech/hosting-a-site-on-amazon-s3.html"><link rel="icon" href="https://www.leepenney.com/img/favicon.ico" type="image/x-icon"><style>body{color:#212121;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:.02em;padding:0 20px;margin:0 auto;max-width:800px}a{color:#212121;text-decoration:none}dt{font-weight:700;font-size:1.2em}dt a{display:block;padding:10px 0 5px 0}dd,div.meta{margin:0 0 1em 0;color:#aaa;font-size:90%}code{font-family:monospace;font-size:120%}header{border-bottom:1px solid;padding:20px 0}header:after{content:"";display:table;clear:both}header svg{float:left;margin:0 10px 0 0}header nav,header span{vertical-align:middle}header nav{line-height:55px}header nav a{border-bottom:1px dotted}main{margin:20px 0}main.home section{display:grid;grid-template-columns:1fr 1fr;grid-auto-rows:calc((100vw - 40px)/ 2);column-gap:10px;row-gap:10px;margin:0 0 3em 0;grid-template-rows:2em}.cat-block{display:block;color:#fff;background:#212121;text-decoration:none;text-align:center;line-height:calc((100vw - 40px)/ 2)}.cat-block:nth-child(1){grid-column-start:1;grid-column-end:3;line-height:normal;color:#212121;background:#fff}span.tag{background:#eaedee;display:inline-block;margin:0 7px 0 0;border-radius:5px;padding:0 10px}main.books dl{padding:0 0 0 90px}main.books dd:after{content:"";display:table;clear:both}main.books dl img{height:120px;width:80px;float:left;margin:-1.6em 0 0 -90px}article img{max-width:100%;height:auto}article hr{display:none}article table{border-collapse:collapse;border:none!important;margin:1em auto}article tr{border-bottom:1px dotted}article td,article th{border:none!important;padding:.5em 1em}article li{margin:0 0 1em 0}article a{border-bottom:1px dotted}main.book article img{height:180px;width:120px;display:block;margin:0 1em 0 0;float:left}main.book article p:first-of-type+ul{list-style-type:none;float:left;padding:0;width:120px;margin:1em 1em 1em 0;font-size:90%;clear:left;text-transform:uppercase;text-align:center}main.book article ul a{display:block;background:#000;color:#fff;line-height:40px;padding:5px;font-size:80%;font-weight:700;margin:0 0 2px 0}form{max-width:400px;margin:0 auto}label{display:block;margin:0;padding:0}input{display:block;font-size:1em;margin-bottom:1em;width:100%;padding:5px;box-sizing:border-box}input[type=submit]{background:#000;color:#fff;border:0;height:40px}main.book section{border-top:1px solid}footer{border-top:1px solid}@media screen and (min-width:800px){header span{line-height:55px}main.home section{grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-template-rows:unset}.cat-block:nth-child(1){grid-column-start:1;grid-column-end:2;font-weight:700;line-height:195px}.cat-block:nth-child(3n+2){grid-column-start:2}.cat-block{line-height:195px}main.books dl{padding:0;display:grid;grid-template-columns:1fr 1fr;grid-auto-flow:dense}main.books dt{padding:0 0 0 calc(73px + 1em)}main.books dl>:nth-of-type(odd){grid-column:1}main.books dl>:nth-of-type(even){grid-column:2}main.books dl img{margin:-1em 1em 0 0}}</style></head><body><header><a href="/"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="55" height="55" viewBox="0 0 400 400"><path d="M0 200v200h400V0H0v200zm60-68v60l56.3-.2 56.2-.3.5-40c.6-45.8.6-45.5 9.5-57.9 7.7-10.7 19.8-18.1 34.2-20.7 3.2-.6 26.4-.9 57.5-.6 46.5.3 53 .5 58.2 2.1 22.7 6.8 38.1 21.9 46.3 45.6 2.4 7 2.7 9 3.1 29.1.3 19.5.2 22.5-1.7 29.9-5.2 20.7-17 34.9-36.6 44-12.2 5.8-19.5 7-40.7 7-10.1 0-34.8.3-55 .7l-36.8.6V344h-39.3l.6-57 .7-57h-67.5c-58.7 0-68-.2-71.3-1.5-4.9-2.1-8.1-5.2-10.3-10-1.7-3.8-1.9-8.1-1.9-75.3V72h38v60z"/><path d="M219 111.3c-1.9.7-4.4 2.7-5.7 4.6-2.3 3.4-2.3 3.5-2.3 39.8v36.4l54.8-.3 54.7-.3 5.6-2.6c6.5-3.1 11.9-8.2 15.1-14.2 2.1-3.9 2.3-5.4 2.3-22.2 0-17.7-.1-18.1-2.8-24.1-3.4-7.4-8.4-12.5-15.2-15.6-5-2.3-5.2-2.3-54-2.5-36.3-.2-49.9.1-52.5 1z"/></svg></a><nav><a href="https://www.leepenney.com/index.html">Home</a> &gt; <a href="https://www.leepenney.com/tech">Tech</a></nav></header><main class="Tips vfd Web/Dev Tips tech"><article><h1>Hosting a Site on Amazon S3</h1><div class="meta">29 Jul, 2016 | <span class="tag">Tips</span><span class="tag">Vfd</span><span class="tag">Web/dev Tips</span><span class="tag">Tech</span></div><p>This is part of my series of try some <a href="http://viewfinderdesign.co.uk/archive/685/experiments-in-alternative-hosting/">alternative hosting options</a>. I left Amazon until last at they're the big gorilla in this market. Amazon Web Services (AWS) have been around since 2006 and hold significant market share. As such they've been used for a great many things, including hosting static sites.</p><p>Simple Storage Service (or S3 to use its more common name) is designed to store files (and there are options about how often they'll be accessed), but can also be used to host static sites.</p><h3>Getting Started</h3><p>Obviously you need any account, and Amazon generously offers a free tier that includes access to all of its products for 12 months. You get the option to select if it's a company or personal account. Despite the free tier you still have to enter a credit card. You also have to enter a phone number that it will call with a PIN number to verify.</p><p>Then you get the option to pick the support plan you want, from Basic (free) to Developer ($49/month) all the way up to Enterprise ($15,000/month!). That's it, all done.</p><p>Amazon have <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html">a handy article</a> to run you through hosting a static site. So I started by creating two buckets for my domain (one for the naked domain, one for www). I selected my closest Region (data center) to host it.</p><p>Next came uploading my files, which is where most services fall down. The default upload dialog doesn't support folders, but there is the option to enable the Enhanced Uploader (Beta), which uses Java. It takes (up to) a couple of minutes to enable it, but I thought I would give it a try. It never actually got installed, probably because I don't have Java enabled in my browser (it never actually gave an error, just sat spinning).</p><p>(<strong>note</strong>: I missed the glaringly obvious message that says I could drop folders on the upload box.)</p><p>There are a number of other options to upload files, depending on your OS. Amazon provides an API and there are a number of command line tools that make use of it, as well as GUI applications. I opted to install <a href="http://s3tools.org/">s3cmd</a>.<br></p><hr id="read-more"><p>I installed from repo using <a href="http://s3tools.org/repositories">the instructions on the website</a>. Took me a while to wrap my head around the usage, but first off you need to run:</p><p><code>s3cmd --configure</code></p><p>Where you'll be prompted for various keys, which you can get by going to Security Credentials in the Amazon Console (click your name top-right). Once done, use:</p><p><code>s3cmd ls</code></p><p>To list all of your buckets, then navigate to your folder and use something like:</p><p><code>s3cmd sync * s3://your-bucket-name</code></p><p>And let it do its thing. Note that you only need to load to the bucket of the naked domain.</p><p>In the Console you'll now need to change the bucket's permissions by adding a policy (example in Amazon's article linked above). Then enable website hosting on the bucket, both of which are on the bucket's properties (right-click the name in the console or click the little document with magnifier icon).</p><p>The latter also lets you set the index and error documents to use. I had both an index.html file and a 404.html file to use. You use the same option but set your other bucket (the www one) to redirect all requests to another host name (your naked domain).</p><p>Next up is setting up your domain in Route 53, which is necessary if you're using a naked (root) domain. You'll need to create a new Hosted Zone and then shift your Nameservers over to Route 53.</p><p>And that's it, you're up and running.</p><p>After testing for speed, I enabled a CloudFront Distribution <a href="http://docs.aws.amazon.com/gettingstarted/latest/swh/getting-started-create-cfdist.html">using this article from Amazon</a>. Cloudfront is Amazon's CDN, so copies your files to endpoints around the world and caches them.</p><h3>Speed</h3><p>I again ran my standard series of tests once uploaded.</p><table style="border:1px solid #ccc;border-collapse:collapse" border="1" cellspacing="0" cellpadding="5"><tbody><tr><th></th><th>Original host</th><th>Test host</th><th>with Cloudfront</th></tr><tr><td>PS Rank (Mobile)</td><td>88/100</td><td>81/100</td><td>81/100</td></tr><tr><td>PS Rank (Desktop)</td><td>93/100</td><td>87/100</td><td>87/100</td></tr><tr><td>WPT First Byte</td><td>0.156s</td><td>0.578s</td><td>0.256s</td></tr><tr><td>WPT Fully Loaded</td><td>2.892s</td><td>2.575s</td><td>1.801s</td></tr><tr><td>WPT Bytes (KB)</td><td>1,093</td><td>344</td><td>345</td></tr><tr><td>GTMet YSlow</td><td>88%</td><td>84%</td><td>89%</td></tr><tr><td>GTMet Load Time</td><td>2.5s</td><td>2.8s</td><td>2.7s</td></tr><tr><td>GTMet Size (Mb)</td><td>1.05</td><td>327</td><td>327</td></tr><tr><td>GTMet Requests</td><td>15</td><td>15</td><td>15</td></tr></tbody></table><p>Page Speed and YSlow scores took a small hit when compared to a standard LAMP host.</p><p>First Byte also took a small hit, but the total load time improved and, as you can see, the page size dropped dramatically.</p><p>Some of the speed differences between using Cloudfront and not may have been down to the time of day I tested.</p><p>Amazon doesn't automatically GZip any of the files it serves, which would help, you would need to manually compress and load files. You have to add cache-controls manually too.</p><h3>Summary</h3><table style="border:1px solid #ccc;border-collapse:collapse" border="1" cellspacing="0" cellpadding="5"><tbody><tr><td>Set-up difficulty</td><td><img style="vertical-align:text-bottom" src="svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjEwIDEwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIGhlaWdodD0iMjAiIHdpZHRoPSIyMCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTAiIHN0eWxlPSJmaWxsOiNEODQ4MzAiIC8+PC9zdmc+" alt="Poor" width="20" height="20"></td><td>It took an hour or so and, while reasonably straightforward, was fairly onerous. I couldn't have done it without a guide. Adding Cloudfront was another big leap.</td></tr><tr><td>Set-up time</td><td><img style="vertical-align:text-bottom" src="svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjEwIDEwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIGhlaWdodD0iMjAiIHdpZHRoPSIyMCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTAiIHN0eWxlPSJmaWxsOiM3OEE4MzAiIC8+PC9zdmc+" alt="Good" width="20" height="20"></td><td>There seems to be a lot of steps and <del>I had to install a utility to upload my files</del>. It could be slicker and easier. That said, it didn't take too long.</td></tr><tr><td>Speed</td><td><img style="vertical-align:text-bottom" src="svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjEwIDEwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIGhlaWdodD0iMjAiIHdpZHRoPSIyMCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTAiIHN0eWxlPSJmaWxsOiNGMEE4MDAiIC8+PC9zdmc+" alt="Average" width="20" height="20"></td><td>Not the fastest host out there, nor does it claim to be.</td></tr><tr><td>Cost</td><td><img style="vertical-align:text-bottom" src="svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjEwIDEwIDIwIDIwIiB2ZXJzaW9uPSIxLjEiIGhlaWdodD0iMjAiIHdpZHRoPSIyMCI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTAiIHN0eWxlPSJmaWxsOiM3OEE4MzAiIC8+PC9zdmc+" alt="Good" width="20" height="20"></td><td>A free year is obviously nice, but it would have cost me about $0.70 for a month</td></tr></tbody></table><h3>Final Thoughts</h3><p>The set-up process was quite convoluted and harder than it needed to be. There seemed a lot of steps. I thought I had to install a thirty-party command line utility to upload files and folders, which seems like a step too far for most users. As it happens I could simply have loaded via the web interface.</p><p>In terms of pricing, I took advantage of the free tier, so it should have cost me nothing, although I appear to have been billed for Route 53 (a whopping $0.61 inc VAT). My site is so tiny the cost to serve would be almost free anyway.</p><p>Performance-wise it did pretty well, offering reasonable speed, comparable to shared hosting, but not lightning by any stretch of the imagination.</p><p>You obviously get the benefit of access to the entire AWS platform, although that probably just adds complexity if all you want to do is host a site. There is a obviously a lot you can do with the platform. My static site is generated using <a href="http://gohugo.io/">Hugo</a> and <a href="http://bezdelev.com/post/hugo-aws-lambda-static-website/">I found some instructions</a> that would allow me to host everything from the build process to the site on AWS without a server (which would site idle 99% of the time).</p><p>AWS certainly isn't a bad way to host a static site, and very cost effective. If you're tech-savvy then the command line may be seen as a benefit as you could automate deploys. Not an ideal platform for most people though.</p></article></main><footer><p>&copy; Lee Penney. All rights reserved.</p></footer></body></html>