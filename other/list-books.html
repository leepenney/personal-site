<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>List Books &gt; Other &gt; Lee Penney</title><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="description" content="Today I officially launch yet another new site.  List Books is designed to allow anyone to sell their second-hand books online with no fees to list them an"><meta property="og:title" content="List Books"><meta property="og:description" content="Today I officially launch yet another new site.  List Books is designed to allow anyone to sell their second-hand books online with no fees to list them an"><meta property="og:url" content="https://www.leepenney.com/other/list-books.html"><meta property="og:type" content="article"><link rel="canonical" href="https://www.leepenney.com/other/list-books.html"><link rel="icon" href="https://www.leepenney.com/img/favicon.ico" type="image/x-icon"><style>body{color:#212121;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:.02em;padding:0 20px;margin:0 auto;max-width:800px}a{color:#212121;text-decoration:none}dt{font-weight:700;font-size:1.2em}dt a{display:block;padding:10px 0 5px 0}dd,div.meta{margin:0 0 1em 0;color:#aaa;font-size:90%}code{font-family:monospace;font-size:120%}header{border-bottom:1px solid;padding:20px 0}header:after{content:"";display:table;clear:both}header svg{float:left;margin:0 10px 0 0}header nav,header span{vertical-align:middle}header nav{line-height:55px}header nav a{border-bottom:1px dotted}main{margin:20px 0}main.home section{display:grid;grid-template-columns:1fr 1fr;grid-auto-rows:calc((100vw - 40px)/ 2);column-gap:10px;row-gap:10px;margin:0 0 3em 0;grid-template-rows:2em}.cat-block{display:block;color:#fff;background:#212121;text-decoration:none;text-align:center;line-height:calc((100vw - 40px)/ 2)}.cat-block:nth-child(1){grid-column-start:1;grid-column-end:3;line-height:normal;color:#212121;background:#fff}span.tag{background:#eaedee;display:inline-block;margin:0 7px 0 0;border-radius:5px;padding:0 10px}main.books dl{padding:0 0 0 90px}main.books dd:after{content:"";display:table;clear:both}main.books dl img{height:120px;width:80px;float:left;margin:-1.6em 0 0 -90px}article img{max-width:100%;height:auto}article hr{display:none}article table{border-collapse:collapse;border:none!important;margin:1em auto}article tr{border-bottom:1px dotted}article td,article th{border:none!important;padding:.5em 1em}article li{margin:0 0 1em 0}article a{border-bottom:1px dotted}main.book article img{height:180px;width:120px;display:block;margin:0 1em 0 0;float:left}main.book article p:first-of-type+ul{list-style-type:none;float:left;padding:0;width:120px;margin:1em 1em 1em 0;font-size:90%;clear:left;text-transform:uppercase;text-align:center}main.book article ul a{display:block;background:#000;color:#fff;line-height:40px;padding:5px;font-size:80%;font-weight:700;margin:0 0 2px 0}form{max-width:400px;margin:0 auto}label{display:block;margin:0;padding:0}input{display:block;font-size:1em;margin-bottom:1em;width:100%;padding:5px;box-sizing:border-box}input[type=submit]{background:#000;color:#fff;border:0;height:40px}main.book section{border-top:1px solid}footer{border-top:1px solid}@media screen and (min-width:800px){header span{line-height:55px}main.home section{grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-template-rows:unset}.cat-block:nth-child(1){grid-column-start:1;grid-column-end:2;font-weight:700;line-height:195px}.cat-block:nth-child(3n+2){grid-column-start:2}.cat-block{line-height:195px}main.books dl{padding:0;display:grid;grid-template-columns:1fr 1fr;grid-auto-flow:dense}main.books dt{padding:0 0 0 calc(73px + 1em)}main.books dl>:nth-of-type(odd){grid-column:1}main.books dl>:nth-of-type(even){grid-column:2}main.books dl img{margin:-1em 1em 0 0}}</style></head><body><header><a href="/"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="55" height="55" viewBox="0 0 400 400"><path d="M0 200v200h400V0H0v200zm60-68v60l56.3-.2 56.2-.3.5-40c.6-45.8.6-45.5 9.5-57.9 7.7-10.7 19.8-18.1 34.2-20.7 3.2-.6 26.4-.9 57.5-.6 46.5.3 53 .5 58.2 2.1 22.7 6.8 38.1 21.9 46.3 45.6 2.4 7 2.7 9 3.1 29.1.3 19.5.2 22.5-1.7 29.9-5.2 20.7-17 34.9-36.6 44-12.2 5.8-19.5 7-40.7 7-10.1 0-34.8.3-55 .7l-36.8.6V344h-39.3l.6-57 .7-57h-67.5c-58.7 0-68-.2-71.3-1.5-4.9-2.1-8.1-5.2-10.3-10-1.7-3.8-1.9-8.1-1.9-75.3V72h38v60z"/><path d="M219 111.3c-1.9.7-4.4 2.7-5.7 4.6-2.3 3.4-2.3 3.5-2.3 39.8v36.4l54.8-.3 54.7-.3 5.6-2.6c6.5-3.1 11.9-8.2 15.1-14.2 2.1-3.9 2.3-5.4 2.3-22.2 0-17.7-.1-18.1-2.8-24.1-3.4-7.4-8.4-12.5-15.2-15.6-5-2.3-5.2-2.3-54-2.5-36.3-.2-49.9.1-52.5 1z"/></svg></a><nav><a href="https://www.leepenney.com/index.html">Home</a> &gt; <a href="https://www.leepenney.com/other">Other</a></nav></header><main class="Web tdp"><article><h1>List Books</h1><div class="meta">28 Jun, 2005 | <span class="tag">Web</span><span class="tag">Tdp</span></div><p>Today I officially launch yet another new site. <a href="http://www.listbooks.co.uk/">List Books</a> is designed to allow anyone to sell their second-hand books online with no fees to list them and no commission when you sell them. I have been offering my books online for a while through my List Stuff site, which I built because I couldn’t find an online service that didn’t want a big chunk of money to allow me to sell books through their site. Great for me, I can build my own, but I had thought of making it available to anyone and I was spurred into action by some newly launched sites aimed specifically at university students wanting to sell their old textbooks. These sites were warmly received, and they’re a clever idea. I have no wish to compete with them, though there is nothing to stop people listing textbooks on my new site, but I was aiming at a different audience: those people, like me, who seem to have read quite a few books they don’t want anymore and would like to get rid of for one reason or another.<br><a name="more"></a><br>If you’re only interested in buying and selling second-hand books, head over to the site and either start browsing or sign up and start listing, if you’re interested in how I built the site, read on.<br><br><strong>From Concept to Reality</strong><br>I started out thinking it would be easy enough, all I’d need to do was add a user registration system to the code that runs List Stuff and away we go. Boy was I wrong. You see, list stuff had plenty of things, all the back end was working (I don’t usually bother building fully working admin systems for sites only I will use) for example, so you could add, edit and delete items, you could see what books had been sold and when and I even had a page that emailed me after taking payment via Nochex. I knew I had some other stuff to tidy up though. The listings page, for example, would need redesigning and some way to select books by author or subject would also be useful, but not much else. When I started thinking about it, however, I kept seeing more problems with the current system.<br><br>You see, the code and underlying database that ran List Stuff was designed to allow listings for one person, so when you scaled it up, it didn’t work too well. One of the problems was repetition. Say I had a hundred users, each with 10 books a piece. That’s 1000 books, or is it? You see, chances are, more than one person is going to be selling the same book. One of the overriding philosophies of database design is data normalisation. In essence, what it means is that you don’t repeat data within the database. Repeated data does more than bloat your database, it leads to data corruption. It also caused problems for people searching for items, they could be listed any number of ways. So that meant storing the book details separately and then linking all items for the same book to that information. Reading up on database normalisation I attempted to create the database correctly, I think I’m pretty much there.<br><br>To start with, I made a list of necessary features and some ‘nice to haves,’ and the list just seemed to grow. Most of them were usability based, things like making books easy to find in a number of different ways (genre, author, best rated, etc) and making it easier to add books (having added 50 of my own to the List Stuff site, I definitely wanted this). I realised that the first thing would be to get data into the system, so I started on the user/item admin side of the site first.<br><br>Normally, getting input from a web page into a database is fairly easy, you create a form, ask the user to fill in the details, check that they haven’t done something completely foolish to the data and then create a new record with that data. This was a little more complicated. Firstly, the book’s details needed to be put somewhere else, assuming they weren’t already in the system. Then you need to create the item – the listing for the physical book. Not so bad. Authors, however, proved a lot more fun. Most books are written by one person, which makes life easy. Thinking about it now I probably could have gotten away with just saving them with the book, but technically it was duplication, and it caused problems for searching or listing books by author. This meant some fancy footwork to break up and save them, however many there were, separately, along with a reference back to the book. Sounds easy, it wasn’t, for me at least, because of the permutations (i.e. names separated by a comma, or &amp; or the word ‘and’). It also makes it more fun putting them back together again to display with a book or item.<br><br>Next, I went in search of a pre-built script that would resolve ISBN numbers into book details, figuring there would be plenty about. Wrong again. So I looked into writing my own, but there is no central database of ISBNs (to my surprise, someone issues them, they must have a complete list), so I looked into getting the data from various online bookstores, most notably, Amazon. That’s when I ran into Amazon’s web services (AWS), which is an excellent service for allowing developers to query Amazon.com’s complete catalogue using almost any type of search. It’s pretty simple to use and completely free, making it a great resource. Unfortunately, it’s listings are aimed at the US and it didn’t pick up many of the ISBNs for UK editions of popular books, to complicate matters, Amazon.co.uk doesn’t offer this service, so I then I had to find another way to do it. PHP scraping was the answer.<br><br>This basically entails reading a page with PHP as a text file, then extracting the relevant information using various string handling functions. I haven’t found any books, as yet, that these two don’t pick up, though I do have a couple of fall back sites should the going get tough (I just haven’t been able to test them yet). I had actually built the script as a standalone, so it needed to be integrated into the site to allow this functionality during the ‘add item’ process.<br><br>The rest of the admin section was relatively straight-forward and just a case of adapting the code I already had, although some other functionality was needed. I added the ability to track orders for example, which I have found useful on some of the sites I’ve used. This means that a user can track his or her orders or sales to see when they were sold, when they were dispatched and when they were received. Obviously it relies on the end users to make use of the system though.<br><br>I also wanted reviews and rating of the books on offer, having the book details stored separately makes this a lot easier, how could you review an item which might only be there a short time? You could, but you’d lose all the reviews the minute it was sold (well, you could get around this). Working out how to store the ratings and to increment them to make sure that the ratings were roughly right (i.e. so that if someone rates a book as one star but it has 20 people rating it at five stars it doesn’t immediately drop to three stars) was another challenge. User feedback, which I wasn’t going to include to start with, proved much easier to implement, thankfully, but as people don’t need to register for an account in order to buy things, it posed something of a security problem, with anyone able to write feedback if they knew what they were doing. I solved by using a check string and asking them to confirm their email address.<br><br>Lastly came form validation (sites would be a whole lot easier if you didn't have to rely on user input). Originally I was going to use <a href="http://simon.incutio.com/">Simon Willison's</a> <a href="http://simon.incutio.com/archive/2003/06/17/theHolyGrail">form validation class</a>, but in the end I gave up and went the old fashion route. Form validation is not my favourite thing, I doubt it's any programmers favourite thing.<br><br>The site is far from perfect and I’ll need to continually tweak and refine it, not to mention adding some more features as time and circumstances allow. Overall I am pretty happy with the site, it certainly pushed my coding abilities further than I thought. Hopefully it’ll prove popular and, more importantly, useful.</p></article></main><footer><p>&copy; Lee Penney. All rights reserved.</p></footer></body></html>